extends includes/layout.jade

mixin background(path)
  div(style="background-image: url('" + path + "')").media
  
mixin media(file,k)
  if file.src && file.manifestfile
    a(href=activePage + file.manifestfile).waves-effect.waves-light.z-depth-1
      -var path = activePage + "/raw" + file.src
      if path.toLowerCase().indexOf(".png") > 0 || path.toLowerCase().indexOf(".jpg") > 0 || path.toLowerCase().indexOf(".bmp") > 0|| path.toLowerCase().indexOf(".gif") > 0
        +background(path)
      else if path.toLowerCase().indexOf(".mov") > 0
        .media
          video(controls).responsive-video
            source(src=path, type="video/quicktime")
            Your browser does not like this video.
      else if path.toLowerCase().indexOf(".mp4") > 0
        .media
          video(controls).responsive-video
            source(src=path, type="video/mp4")
            Your browser does not like this video.
           
block content 
  h1.center Media Gallery for #{node} 
  .mediagrid
    each file,k in files
      if file.src && file.manifestfile
        .griditem
          .wrapper
            +media(file,k)